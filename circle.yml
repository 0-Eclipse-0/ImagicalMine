checkout:
  post:
    - git submodule sync
    - git submodule update --init
    - mkdir plugins
    - wget -O plugins/DevTools.phar https://github.com/PocketMine/DevTools/releases/download/v1.9.0/DevTools_v1.9.0.phar
    - php tests/TravisTest.php
    - cp -R ./plugins/DevTools/ImagicalMine_1.0dev.phar $CIRCLE_ARTIFACTS

dependencies:
  pre:
    - pecl install channel://pecl.php.net/pthreads-2.0.10
    - pecl install channel://pecl.php.net/weakref-0.2.6
    - pecl install channel://pecl.php.net/yaml-1.1.1

machine:
  php:
    version: 5.6.14
